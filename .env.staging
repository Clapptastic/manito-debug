# Staging Environment Configuration for Manito
# ==============================================

# Server Configuration
NODE_ENV=staging
PORT=3000
CLIENT_URL=https://staging-manito.yourdomain.com
HOSTNAME=0.0.0.0

# Database Configuration
DATABASE_URL=postgresql://manito_user:staging_password@postgres:5432/manito_staging
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_TIMEOUT=30000

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=
REDIS_DB=1
REDIS_CONNECT_TIMEOUT=10000

# Authentication & Security (Less restrictive for testing)
JWT_SECRET=staging_jwt_secret_change_in_production_32chars
SESSION_SECRET=staging_session_secret_change_in_production
BCRYPT_ROUNDS=10
TOKEN_EXPIRES_IN=24h
REFRESH_TOKEN_EXPIRES_IN=7d

# Rate Limiting (More permissive for testing)
RATE_LIMIT_WINDOW_MS=600000
RATE_LIMIT_MAX_REQUESTS=200
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# AI Integration
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
LOCAL_AI_ENDPOINT=http://localhost:8080
AI_DEFAULT_PROVIDER=local
AI_REQUEST_TIMEOUT=30000
AI_MAX_TOKENS=1000

# Scanning Configuration
MAX_SCAN_SIZE_MB=250
MAX_CONCURRENT_SCANS=2
SCAN_TIMEOUT_MS=300000
WORKER_THREADS_MAX=2
SCAN_FILE_SIZE_LIMIT_MB=25

# Performance & Resource Limits
NODE_OPTIONS="--max-old-space-size=1024"
UV_THREADPOOL_SIZE=4

# Logging Configuration (More verbose for debugging)
LOG_LEVEL=debug
LOG_FORMAT=pretty
LOG_MAX_SIZE=50m
LOG_MAX_FILES=5
LOG_ROTATE=daily

# Monitoring & Health Checks
HEALTH_CHECK_INTERVAL=30000
METRICS_ENABLED=true
PROMETHEUS_ENABLED=false

# Security Headers (Less restrictive for testing)
HELMET_CSP_ENABLED=false
HELMET_HSTS_MAX_AGE=0
HELMET_FRAME_GUARD=DENY

# File Upload & Processing
UPLOAD_MAX_SIZE_MB=50
UPLOAD_ALLOWED_TYPES=js,ts,jsx,tsx,json,md,txt,yml,yaml,xml,py,rb,go,rs
TEMP_DIR=/app/tmp

# Feature Flags (Enable experimental features in staging)
FEATURE_FLAGS=streaming_scanner,async_jobs,real_time_updates,debug_mode