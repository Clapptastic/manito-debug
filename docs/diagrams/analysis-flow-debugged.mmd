graph TD
    A[User Uploads Files] --> B[Upload API /api/upload]
    A --> C[User Enters Path]
    A --> D[User Browses Directory]
    
    B --> E[File Extraction & Processing]
    C --> F[Path Validation]
    D --> G[Directory Selection]
    
    E --> H[Files Stored in Database]
    F --> H
    G --> H
    
    H --> I[Scanner Service Runs]
    I --> J[Scan Results Stored]
    J --> K[Frontend Receives Results]
    
    K --> L{User Clicks 'Start Analysis'}
    L --> M{Has Existing Results?}
    M -->|Yes| N[Use Existing Results]
    M -->|No| O[Call /api/scan with Path]
    
    N --> P[Display Results]
    O --> Q[Scanner Service]
    Q --> R[New Scan Results]
    R --> P
    
    P --> S[WebSocket Updates]
    S --> T[Frontend Updates]
    
    subgraph "FIXED: Database Issues"
        H1[Projects Table Created]
        H2[Anonymous Projects Supported]
        H3[API Returns Projects]
    end
    
    subgraph "FIXED: Analysis Flow"
        L1[Upload Already Scans Files]
        L2[Analysis Button Uses Existing Results]
        L3[Proper Error Handling]
    end
    
    subgraph "FIXED: Settings Routing"
        S1[Settings Modal Opens Correctly]
        S2[Environment Status Added]
        S3[Header Cleaned Up]
    end
    
    H --> H1
    H --> H2
    H --> H3
    
    L --> L1
    L --> L2
    L --> L3
    
    S --> S1
    S --> S2
    S --> S3
